<html>
    <head>
        <script type="text/javascript" src="JavaScript/jquery-1.2.6.min.js"></script>
    </head>
  <body>
    <!--  bg color being green is just for sizing it in XenHTML Preview--> 
    <img id='mapimg' src='' style='background-color:green;' height="1272px"  width="1319px"/>
  </body>
  <script>
    var MapWidth= 1319; 
    var MapHeight = 1272; 
    var MapZoom = .25; 


    document.getElementById('mapimg').width = MapWidth;
    document.getElementById('mapimg').height = MapHeight;

    function updatemap(location)
    {
      var locationh =  JSON.parse(httpGet("https://geocode.xyz/"+location+"?json=1"));
      var longitudemap = Number(locationh.longt)-MapZoom;
      var latitutemap = Number(locationh.latt)-MapZoom;
      var longitudemap1 = Number(locationh.longt)+MapZoom;
      var latitutemap1 = Number(locationh.latt)+MapZoom;
      var uri = "https://background-api.alvarcarto.com/render/api/raster/render-map?swLat="+latitutemap+"&swLng="+longitudemap+"&neLat="+latitutemap1+"&neLng="+longitudemap1+"&mapStyle=bg-black&width="+MapWidth+"&height="+MapHeight+"&size=50x70cm&apiKey=undefined";
      console.log(longitudemap+" | "+latitutemap+" | "+uri);
      var url = httpGet(uri);
      url = "https://background-api.alvarcarto.com/render"+(url.substring(9,url.length-2));
      console.log(url);
      document.getElementById('mapimg').src= url;
      console.log(document.getElementById('mapimg').src);
    }
    
    function mainUpdate(type)
    {
      if(type == "weather")
      {
        updatemap(weather.address.neighbourhood);
      }
    }

    
    function httpGet(theUrl)
    {
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.open( "GET", theUrl, false );
      xmlHttp.send( null );
      return xmlHttp.responseText;
    }
  </script>
</html>
